# AI零代码生成平台前端实现总结

## 已完成的功能

### 1. 主页 (HomePage.vue)
- ✅ 网站标题："一句话 呈所想" 与猫头图标
- ✅ 用户提示词输入框，支持创建应用
- ✅ 我的应用分页列表（仅登录用户可见）
- ✅ 精选应用分页列表
- ✅ 应用卡片展示，包含封面、名称、创建时间等信息
- ✅ 搜索功能（按应用名称搜索）
- ✅ 分页功能（每页20个应用）
- ✅ 点击应用卡片跳转到对话页面

### 2. 应用生成对话页 (AppChatPage.vue)
- ✅ 顶部导航栏：应用名称下拉菜单、部署按钮
- ✅ 左侧对话区域：
  - 消息区域（用户消息在右、AI消息在左）
  - 用户消息输入框
  - 支持上传、编辑、优化按钮
- ✅ 右侧网页展示区域：
  - 等待代码生成完成时显示占位符
  - 生成完成后显示生成的网站效果
- ✅ SSE流式对话功能：
  - 使用EventSource实现实时流式返回
  - 自动将初始提示词作为第一条消息发送
  - 支持实时显示AI回复内容
- ✅ 部署功能：调用后端部署接口获取可访问URL
- ✅ 应用名称编辑功能

### 3. 应用管理页 (AppManagePage.vue)
- ✅ 仅管理员可访问
- ✅ 应用列表展示（ID、名称、创建者、提示词、代码类型、优先级等）
- ✅ 搜索功能（按应用名称、创建者、创建者账号搜索）
- ✅ 分页功能
- ✅ 操作按钮：
  - 编辑：跳转到应用信息修改页
  - 删除：确认后删除应用
  - 精选：设置应用优先级为99

### 4. 应用信息修改页 (AppEditPage.vue)
- ✅ 用户和管理员都可以进入
- ✅ 权限控制：普通用户只能编辑自己的应用
- ✅ 应用基本信息展示
- ✅ 编辑表单：
  - 应用名称（所有用户可编辑）
  - 应用封面（仅管理员可编辑）
  - 优先级（仅管理员可编辑）
  - 初始提示词（只读）
- ✅ 应用预览功能
- ✅ 保存和取消功能

### 5. 路由配置
- ✅ 添加了新的路由：
  - `/app/chat/:id` - 应用生成对话页
  - `/app/edit/:id` - 应用信息修改页
  - `/admin/appManage` - 应用管理页
- ✅ 权限控制：对话页和编辑页需要用户登录，管理页需要管理员权限

### 6. 菜单配置
- ✅ 在BasicLayout中添加了"应用管理"菜单项
- ✅ 仅管理员可见

## 技术实现要点

### 1. SSE流式对话
- 使用EventSource实现实时流式返回
- 后端地址：`http://localhost:8123/api/app/chat/gen/code`
- 支持实时显示AI回复内容
- 生成完成后自动显示网站效果

### 2. 应用ID精度问题处理
- 整个项目将appId作为字符串处理，不转换为Number
- 避免JavaScript数字精度丢失问题
- 在路由参数、API调用中都使用字符串类型

### 3. API响应处理
- 所有API响应都通过`res.data`访问
- 统一处理响应格式：`{ code, data, message }`

### 4. 权限控制
- 使用ACCESS_ENUM进行权限控制
- 普通用户只能编辑自己的应用
- 管理员可以编辑所有应用

## 注意事项

### 1. 类型定义问题
- 由于API类型定义文件存在问题，暂时使用`Record<string, any>`类型
- 建议后续修复API类型定义文件

### 2. 应用ID处理
- 所有涉及应用ID的地方都使用字符串类型
- 避免使用`parseInt()`转换，防止精度丢失

### 3. 网站展示
- 生成的网站通过iframe展示
- URL格式：`http://localhost:8123/api/static/{codeGenType}_{appId}/`
- 只有在SSE流式调用全部完成后才显示网站

### 4. 部署功能
- 部署成功后显示可访问的URL
- 支持复制链接到剪贴板

## 待优化项目

1. 修复API类型定义文件，提供完整的TypeScript类型支持
2. 添加错误处理和重试机制
3. 优化SSE连接的错误处理
4. 添加加载状态和进度提示
5. 优化移动端响应式设计
6. 添加应用封面上传功能
7. 添加更多的应用管理功能

## 文件结构

```
src/
├── pages/
│   ├── HomePage.vue              # 主页
│   ├── AppChatPage.vue           # 应用生成对话页
│   ├── AppEditPage.vue           # 应用信息修改页
│   └── admin/
│       └── AppManagePage.vue     # 应用管理页
├── router/
│   └── index.ts                  # 路由配置
└── layouts/
    └── BasicLayout.vue           # 基础布局
```

## 使用说明

1. 用户在主页输入提示词创建应用
2. 自动跳转到对话页面，开始与AI对话生成代码
3. 生成完成后在右侧显示网站效果
4. 可以继续对话优化应用
5. 完成后可以部署应用
6. 管理员可以在应用管理页管理所有应用
7. 用户可以编辑自己的应用信息
